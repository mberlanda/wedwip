var addedGuests = [];

$(document).ready(function() {
  renderGuestsTable();
});

$("#add-guest").click(function() {
  var name = $("#name").val(),
      surname = $("#surname").val();
  
  if (name === "" || surname  === "") {
    return;
  }

  var item = {
    name: name,
    surname: surname
  };

  var found = false;
  $.each(addedGuests, function( index, value ) {
    if (value["name"] == name & value["surname"] == surname) {
      found = true;
    }
  });
  if (found) {
    return;
  }
  
  addedGuests.push(item);
  <!-- $("#simulation_agreements_json").val(JSON.stringify(addedGuests)); -->
  renderGuestsTable();
})

function renderGuestsTable() {
  var template = $.templates("#added-guests-template");
  var htmlAgreements = template.render(addedGuests);
  $("#added-guests-container").html(htmlAgreements);  
}

function removeGuest(index) {
  addedGuests.splice(index, 1);
  <!-- $("#simulation_agreements_json").val(JSON.stringify(addedGuests)); -->
  renderGuestsTable();
}